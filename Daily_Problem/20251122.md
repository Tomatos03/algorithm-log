# [757. 设置交集大小至少为2](https://leetcode.cn/problems/set-intersection-size-at-least-two/)

## 解题思路

1. 将输入数组按照右端点进行排序
1. 排序之后相邻两个区间有两种情况
   1. 不存在交集, 此时第一个区间必然需要2个数
   1. 存在交集, 交集部分一定是第一个区间的后缀, 此时需要尽量取第一个区间靠右的数(越靠右与后面的区间越有机会相交, 减少最终集合的大小)


## 参考代码


```cpp
// 最劣势的情况下时间复杂度为O(n^2)
class Solution {
public:
    int intersectionSizeTwo(vector<vector<int>>& intervals) {
        int n = intervals.size();
        sort(intervals.begin(), intervals.end(), [&](auto &x, auto &y) {
            return x[1] < y[1];
        });
        set<int> st;
        for (int i = 0; i < n; ++i) {
            int l = intervals[i][0], r = intervals[i][1];
            auto pos = st.lower_bound(l);
            auto end = st.end();
            int need = 2;
            while (end != pos) {
                end = prev(end);
                --need;
            }

            while (need > 0) {
                while (st.count(r))
                    --r;

                st.insert(r);
                --need;
                --r;
            }
        }
        return int(st.size());
    }
};

```

