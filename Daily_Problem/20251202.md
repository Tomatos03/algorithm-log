# [3623. 统计梯形的数目 I](https://leetcode.cn/problems/count-number-of-trapezoids-i/)

## 解题思路

1. 将输入坐标按照其$y$坐标分组, $y$相同的放在同一组内
1. 想要组成梯形, 只需要从任意两个组之中分别抽取$2$个坐标即可
1. 运算的结果数量非常大无法直接通过相乘运算计算得出。假设有四个分组: $A、B、C、D$， 注意到$A$与$B、C、D$能够组成梯形（A组抽取2个点，另一个组在抽取2个点）；同样的$B$可以和$C、D$组成梯形， $C$可以和$D$组成梯形。上述过程存在一个运算规律：对于一个分组数组$arr$, $arr[i]$总是能够和$arr[i + 1\cdots n]$组成梯形



## 参考代码


```cpp
// 时间复杂度O(n)
using i64 = long long;
class Solution {
    const int mod = 1e9 + 7;
    // 逐位相乘法实现组合数计算
    // 算法时间复杂度O(m)
    i64 C(int n, int m) {
        if (m > n)
            return 0;
        i64 res = 1;
        for (int i = 1; i <= m; ++i) {
            res = res * (n - i + 1) / i;
        }
        return res;
    }

public:
    int countTrapezoids(vector<vector<int>>& points) {
        map<int, vector<int>> mp;
        for (vector<int> &point : points) {
            int x = point[0], y = point[1];
            mp[y].push_back(x);
        }
        vector<int> b;
        for (auto e : mp) {
            b.push_back(C(e.second.size(), 2));
        }
        int size = b.size();
        i64 cnt = 0, sum = b[size - 1];
        for (int i = b.size() - 2; i >= 0; --i) {
            cnt = (cnt + b[i] * sum) % mod;
            sum += b[i];
            sum %= mod;
        }
        return cnt;
    }
};
```

