# [2211. 统计道路上的碰撞次数](https://leetcode.cn/problems/count-collisions-on-a-road/)

## 解题思路

1. 将输入字符串中$directions[i] = 'L', directions[i + 1] = 'R'$的字符替换成一个字符$'S'$, 每次替换碰撞次数$+2$
1. 用$str$表示$directions$经过替换后的字符串. 此时仅需要关注第一个$'S'$出现的位置, 和最后一个$'S'$出现的位置.
1. 统计第一个$'S'$出现位置右边的所有字符$'L'$的个数和最后一个$'S'$出现的位置左边的所有字符$'R'$的个数

## 参考代码


```cpp
// 时间复杂度O(n)
class Solution {
public:
    int countCollisions(string directions) {
        int size = directions.size(), ans = 0;
        string str = "";
        for (char &c : directions) {
            if (!str.empty() && str.back() == 'R' && c == 'L') {
                str.pop_back();
                str.push_back('S');
                ans += 2;
                continue;
            }
            str.push_back(c);
        }
        size = str.size();
        int l = 0, r = size - 1;
        while (l < size && str[l] != 'S')
            ++l;
        while (r >= 0 && str[r] != 'S')
            --r;
        for (int i = 0; i < r; ++i) {
            ans += (str[i] == 'R');
        }
        for (int i = size - 1; i > l; --i) {
            ans += (str[i] == 'L');
        }
        return ans;
    }
};
```

