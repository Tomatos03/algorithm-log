# [3542. 将所有元素变为 0 的最少操作次数](https://leetcode.cn/problems/minimum-operations-to-convert-all-elements-to-zero/)

## 解题思路

1. 从最小的元素开始操作, 每一轮操作当前轮的所有的最小元素
2. 利用一个集合记录每一轮操作之前数字$0$的位置
3. 假设当前回合的最小元素为$mi$, 其中两个相邻的最小元素的位置为$pos_0, pos_1$. 如果满足$pos_0 \neq pos_1$,  说明此时两个最小元素之间有$0$, 反之说明没有$0$. 中间没有$0$可以通过一次操作完成

## 参考代码


```cpp
// 时间复杂度为O(nlogn)
using i64 = long long;
using pii = pair<int, int>;
class Solution {
public:
    int minOperations(vector<int>& nums) {
        int n = nums.size(), cnt = 0;
        map<int, vector<int>> mp;
        set<int> zero;
        zero.insert(-1);
        for (int i = 0; i < n; ++i) {
            if (nums[i] != 0) {
                mp[nums[i]].push_back(i);
            } else {
                zero.insert(i);
            }
        }
        for (auto& [v, pos] : mp) {
            int m = pos.size();

            ++cnt;
            int pre_pos = *prev(zero.upper_bound(pos[0]));
            for (int i = 1; i < m; ++i) {
                int zero_pos = *prev(zero.upper_bound(pos[i]));
                cnt += zero_pos - pre_pos > 1;
                pre_pos = zero_pos;
            }

            for (int &p : pos) {
                zero.insert(p);
            }
        }
        return cnt;
    }
};

```

