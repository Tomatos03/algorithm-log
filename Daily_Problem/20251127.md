# [3381. 长度可被 K 整除的子数组的最大元素和](https://leetcode.cn/problems/maximum-subarray-sum-with-length-divisible-by-k/)

## 解题思路

1. 注意到原问题存在子问题即: 
$$以i为结尾的子数组中长度能够被k整除的子数组的最大元素和 = 以i - k结尾的子数组中长度能够被k整除的子数组的最大元素和 + a[i - k + 1 \cdots i]$$ 
2. 维护一个长度为$k$的区间和, 转移起点(第一个能够转移的位置)位置为$2 * k - 1$

## 参考代码


```cpp
// 时间复杂度O(n)
using i64 = long long;
class Solution {
public:
    long long maxSubarraySum(vector<int>& nums, int k) {
        int n = nums.size();
        i64 sum = 0, ans = LLONG_MIN;
        vector<i64> f(n, LLONG_MIN);
        for (int i = 0, j = 0; i < n; ++i) {
            sum += nums[i];
            if (i - j + 1 == k) {
                f[i] = sum;
                sum -= nums[j];
                ++j;
            }
            if (i >= 2 * k - 1) {
                f[i] = max(0LL, f[i - k]) + f[i];
            }
            ans = max(ans, f[i]);
        }
        return ans;
    }
};
```

