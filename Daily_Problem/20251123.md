# [1262. 可被三整除的最大和](https://leetcode.cn/problems/greatest-sum-divisible-by-three/)

## 解题思路

1. 注意到原问题存在明显的子问题: $[1, n]$数组能够得到的最大且能够被3整除的和, 在选择或不选择第一个数之后原问题可以转化为先计算$[2, n]$的数组能够得到的最大且能够被3整除的和. 再根据以下关系式
   $$
   f((j + nums[i]) \% 3, i) = \max(f(j, i) + nums[i], f(j + nums[i] \% 3, i - 1)) \\
   j = 0,1, 2 \\
   i 表示数组索引下标
   $$
   直接计算得到最终答案


## 参考代码


```cpp
// 时间复杂度O(n)
class Solution {
public:
    int maxSumDivThree(vector<int>& nums) {
        int n = nums.size();
        nums.insert(nums.begin(), 0);

        vector<vector<int>> f(3, vector<int>(n + 1, INT_MIN));
        f[0][0] = 0;
        for (int i = 1; i <= n; ++i) {
            int r = nums[i] % 3;
            for (int j = 0; j < 3; ++j) {
                f[(j + r) % 3][i] = max(f[j][i - 1] + nums[i], f[(j + r) % 3][i - 1]);
            }
        }
        return max(0, f[0][n]);
    }
};

```

